<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">               


    <p:dialog onShow="PF('dialogAddOrden').initPosition()" id="DlgAddOrden" 
              widgetVar="dialogAddOrden" modal="true" showEffect="explode" 
              resizable="false" appendTo="@(body)"  closable="false"        
              header="Generar Orden de Compra" >

        <h:form id="formAddOrden" >
            <p:panelGrid columns="2" columnClasses="column" style="width: 100%" >
                <p:outputLabel value="Nombre Proveedor *"  for="nombre"/>  
                <p:autoComplete id="nombre" placeholder="Ingrese Nombre" inputStyle="width: 500px;"
                                minQueryLength="3" value="#{ordenCompraBean.nombreProveedor}" scrollHeight="250"
                                completeMethod="#{ordenCompraBean.buscarProveedores}" >
                    <p:ajax listener="#{ordenCompraBean.completarDatos}" update="rut" />
                </p:autoComplete>

                <p:outputLabel value="RUT *"  for="rut"/>
                <p:outputLabel id="rut" value="#{ordenCompraBean.ordenCompraTO.rut}" style="width: 100%"  />               

            </p:panelGrid>
            <p:commandButton value="Productos" 
                             icon="pi pi-plus"                                             
                             >

            </p:commandButton>

            <br/>
            <br/>
            <p:dataTable                 
                id="dataTableProductos"
                tableStyle="min-width: 100px;"
                var="varProductos"

                lazy="true"
                reflow="true"
                paginator="true"
                filterDelay="1000"
                rows="5"
                paginatorPosition="bottom"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink}
                {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}  "
                rowsPerPageTemplate="5,10,15,20,25,50"
                currentPageReportTemplate="( {currentPage} of {totalPages} - Total : {totalRecords} )"

                widgetVar="TableProductos">

                <p:column  headerText="Codigo"   width="100px">
                    <h:outputText  styleClass="left"></h:outputText>
                </p:column>

                <p:column  headerText="Descripcion"    width="150px">
                    <h:outputText   styleClass="center"></h:outputText>
                </p:column>

                <p:column  headerText="Cantidad"    width="100px">
                    <h:outputText   styleClass="center"></h:outputText>
                </p:column>

                <p:column  headerText="Unitario"   width="100px">
                    <h:outputText    styleClass="center"></h:outputText>
                </p:column>
                
                  <p:column  headerText="Total"   width="100px">
                    <h:outputText    styleClass="center"></h:outputText>
                </p:column>

                <p:column  headerText="AcciÃ³n"  width="50px" >
                    <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger" 
                                    
                                     update="dataTableProductos"/>
                </p:column>
            </p:dataTable>

            <br/><!-- comment -->
            <div style="text-align:center">
                <p:commandButton value="CREAR ORDEN" styleClass="ui-button-raised ui-button-success"  
                                 icon="pi pi-check" iconPos="right"

                                 onstart="PF('blockUIWidget').show()" 
                                 oncomplete="PF('blockUIWidget').hide(); PF('formAddOrden').hide()"
                                 update="formMessage"/>
                <p:spacer width="10px"/>
                <p:commandButton  value="CANCELAR" styleClass="ui-button-raised ui-button-danger" 
                                  icon="pi pi-times" iconPos="right"                                 
                                  onstart="PF('blockUIWidget').show()" 
                                  oncomplete="PF('blockUIWidget').hide(); PF('dialogAddOrden').hide()"
                                  />
            </div>


        </h:form>
    </p:dialog>
</ui:composition>